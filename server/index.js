import{b as C,a as H,r as St,p as Se,o as Ot,g as Rt,s as Tt}from"./chunks/internal.js";import{r as At,w as Oe}from"./chunks/index.js";const Re=!1;function we(e,t){const r=[];e.split(",").forEach((o,i)=>{const c=/([^/]+)\/([^;]+)(?:;q=([0-9.]+))?/.exec(o);if(c){const[,d,a,l="1"]=c;r.push({type:d,subtype:a,q:+l,i})}}),r.sort((o,i)=>o.q!==i.q?i.q-o.q:o.subtype==="*"!=(i.subtype==="*")?o.subtype==="*"?1:-1:o.type==="*"!=(i.type==="*")?o.type==="*"?1:-1:o.i-i.i);let n,s=1/0;for(const o of t){const[i,c]=o.split("/"),d=r.findIndex(a=>(a.type===i||a.type==="*")&&(a.subtype===c||a.subtype==="*"));d!==-1&&d<s&&(n=o,s=d)}return n}function Pt(e,...t){const r=e.headers.get("content-type")?.split(";",1)[0].trim()??"";return t.includes(r.toLowerCase())}function Fe(e){return Pt(e,"application/x-www-form-urlencoded","multipart/form-data","text/plain")}class I{constructor(t,r){this.status=t,typeof r=="string"?this.body={message:r}:r?this.body=r:this.body={message:`Error: ${t}`}}toString(){return JSON.stringify(this.body)}}class U{constructor(t,r){this.status=t,this.location=r}}class ge{constructor(t,r){this.status=t,this.data=r}}function Ct(e,t,r){const n={},s=e.slice(1);let o=0;for(let i=0;i<t.length;i+=1){const c=t[i],d=s[i-o];if(c.chained&&c.rest&&o){n[c.name]=s.slice(i-o,i+1).filter(a=>a).join("/"),o=0;continue}if(d===void 0){c.rest&&(n[c.name]="");continue}if(!c.matcher||r[c.matcher](d)){n[c.name]=d;const a=t[i+1],l=s[i+1];a&&!a.rest&&a.optional&&l&&(o=0);continue}if(c.optional&&c.chained){o++;continue}return}if(!o)return n}function $e(e,t){if(isNaN(e)||e<400||e>599)throw new Error(`HTTP error status codes must be between 400 and 599 â€” ${e} is invalid`);return new I(e,t)}function be(e,t){const r=JSON.stringify(e),n=new Headers(t?.headers);return n.has("content-length")||n.set("content-length",Be.encode(r).byteLength.toString()),n.has("content-type")||n.set("content-type","application/json"),new Response(r,{...t,headers:n})}const Be=new TextEncoder;function A(e,t){const r=new Headers(t?.headers);return r.has("content-length")||r.set("content-length",Be.encode(e).byteLength.toString()),new Response(e,{...t,headers:r})}function Nt(e){return e instanceof Error||e&&e.name&&e.message?e:new Error(JSON.stringify(e))}function qt(e,t){return A(`${t} method not allowed`,{status:405,headers:{allow:It(e).join(", ")}})}function It(e){const t=["GET","POST","PUT","PATCH","DELETE","OPTIONS"].filter(r=>r in e);return("GET"in e||"HEAD"in e)&&t.push("HEAD"),t}function ve(e,t,r){let n=e.templates.error({status:t,message:r});return A(n,{headers:{"content-type":"text/html; charset=utf-8"},status:t})}async function Te(e,t,r){r=r instanceof I?r:Nt(r);const n=r instanceof I?r.status:500,s=await P(e,t,r),o=we(e.request.headers.get("accept")||"text/html",["application/json","text/html"]);return e.isDataRequest||o==="application/json"?be(s,{status:n}):ve(t,n,s.message)}async function P(e,t,r){return r instanceof I?r.body:await t.hooks.handleError({error:r,event:e})??{message:e.route.id!=null?"Internal Error":"Not Found"}}function ne(e,t){return new Response(void 0,{status:e,headers:{location:t}})}function Ve(e,t){return t.path?`Data returned from \`load\` while rendering ${e.route.id} is not serializable: ${t.message} (data${t.path})`:t.path===""?`Data returned from \`load\` while rendering ${e.route.id} is not a plain object`:t.message}function Ge(e){const t=[];return e.uses&&e.uses.dependencies.size>0&&t.push(`"dependencies":${JSON.stringify(Array.from(e.uses.dependencies))}`),e.uses&&e.uses.params.size>0&&t.push(`"params":${JSON.stringify(Array.from(e.uses.params))}`),e.uses?.parent&&t.push('"parent":1'),e.uses?.route&&t.push('"route":1'),e.uses?.url&&t.push('"url":1'),`"uses":{${t.join(",")}}`}async function Ut(e,t,r){const n=e.request.method;let s=t[n];if(!s&&n==="HEAD"&&(s=t.GET),!s)return qt(t,n);const o=t.prerender??r.prerender_default;if(o&&(t.POST||t.PATCH||t.PUT||t.DELETE))throw new Error("Cannot prerender endpoints that have mutative methods");if(r.prerendering&&!o){if(r.depth>0)throw new Error(`${e.route.id} is not prerenderable`);return new Response(void 0,{status:204})}try{let i=await s(e);if(!(i instanceof Response))throw new Error(`Invalid response from route ${e.url.pathname}: handler should return a Response object`);return r.prerendering&&(i=new Response(i.body,{status:i.status,statusText:i.statusText,headers:new Headers(i.headers)}),i.headers.set("x-sveltekit-prerender",String(o))),i}catch(i){if(i instanceof U)return new Response(void 0,{status:i.status,headers:{location:i.location}});throw i}}function zt(e){const{method:t,headers:r}=e.request;if(t==="PUT"||t==="PATCH"||t==="DELETE"||t==="OPTIONS")return!0;if(t==="POST"&&r.get("x-sveltekit-action")==="true")return!1;const n=e.request.headers.get("accept")??"*/*";return we(n,["*","text/html"])!=="text/html"}function Ae(e){return e.filter(t=>t!=null)}function ke(e,t){return e==="/"||t==="ignore"?e:t==="never"?e.endsWith("/")?e.slice(0,-1):e:t==="always"&&!e.endsWith("/")?e+"/":e}function Dt(e){return e.split("%25").map(decodeURI).join("%25")}function Ht(e){for(const t in e)e[t]=decodeURIComponent(e[t]);return e}const Lt=["href","pathname","search","searchParams","toString","toJSON"];function Mt(e,t){const r=new URL(e);for(const n of Lt)Object.defineProperty(r,n,{get(){return t(),e[n]},enumerable:!0,configurable:!0});return r[Symbol.for("nodejs.util.inspect.custom")]=(n,s,o)=>o(e,s),Wt(r),r}function Wt(e){Object.defineProperty(e,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}function Ze(e){for(const t of["search","searchParams"])Object.defineProperty(e,t,{get(){throw new Error(`Cannot access url.${t} on a page with prerendering enabled`)}})}const je="/__data.json";function Jt(e){return e.endsWith(je)}function Ft(e){return e.replace(/\/$/,"")+je}function Pe(e){return e.slice(0,-je.length)}const Bt={"<":"\\u003C","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\u2028":"\\u2028","\u2029":"\\u2029"};class J extends Error{constructor(t,r){super(t),this.name="DevalueError",this.path=r.join("")}}function M(e){return Object(e)!==e}const Vt=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xe(e){const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null||Object.getOwnPropertyNames(t).sort().join("\0")===Vt}function te(e){return Object.prototype.toString.call(e).slice(8,-1)}function Gt(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function z(e){let t="",r=0;const n=e.length;for(let s=0;s<n;s+=1){const o=e[s],i=Gt(o);i&&(t+=e.slice(r,s)+i,r=s+1)}return`"${r===0?e:t+e.slice(r)}"`}const ce="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",Zt=/[<\b\f\n\r\t\0\u2028\u2029]/g,Xt=/^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/;function F(e,t){const r=new Map,n=[],s=new Map;function o(a){if(typeof a=="function")throw new J("Cannot stringify a function",n);if(!M(a)){if(r.has(a)){r.set(a,r.get(a)+1);return}if(r.set(a,1),t){const u=t(a);if(typeof u=="string"){s.set(a,u);return}}switch(te(a)){case"Number":case"BigInt":case"String":case"Boolean":case"Date":case"RegExp":return;case"Array":a.forEach((u,_)=>{n.push(`[${_}]`),o(u),n.pop()});break;case"Set":Array.from(a).forEach(o);break;case"Map":for(const[u,_]of a)n.push(`.get(${M(u)?ue(u):"..."})`),o(_),n.pop();break;default:if(!Xe(a))throw new J("Cannot stringify arbitrary non-POJOs",n);if(Object.getOwnPropertySymbols(a).length>0)throw new J("Cannot stringify POJOs with symbolic keys",n);for(const u in a)n.push(`.${u}`),o(a[u]),n.pop()}}}o(e);const i=new Map;Array.from(r).filter(a=>a[1]>1).sort((a,l)=>l[1]-a[1]).forEach((a,l)=>{i.set(a[0],Yt(l))});function c(a){if(i.has(a))return i.get(a);if(M(a))return ue(a);if(s.has(a))return s.get(a);const l=te(a);switch(l){case"Number":case"String":case"Boolean":return`Object(${c(a.valueOf())})`;case"RegExp":return`new RegExp(${z(a.source)}, "${a.flags}")`;case"Date":return`new Date(${a.getTime()})`;case"Array":const u=a.map((p,h)=>h in a?c(p):""),_=a.length===0||a.length-1 in a?"":",";return`[${u.join(",")}${_}]`;case"Set":case"Map":return`new ${l}([${Array.from(a).map(c).join(",")}])`;default:const f=`{${Object.keys(a).map(p=>`${Qt(p)}:${c(a[p])}`).join(",")}}`;return Object.getPrototypeOf(a)===null?Object.keys(a).length>0?`Object.assign(Object.create(null),${f})`:"Object.create(null)":f}}const d=c(e);if(i.size){const a=[],l=[],u=[];return i.forEach((_,f)=>{if(a.push(_),s.has(f)){u.push(s.get(f));return}if(M(f)){u.push(ue(f));return}switch(te(f)){case"Number":case"String":case"Boolean":u.push(`Object(${c(f.valueOf())})`);break;case"RegExp":u.push(f.toString());break;case"Date":u.push(`new Date(${f.getTime()})`);break;case"Array":u.push(`Array(${f.length})`),f.forEach((p,h)=>{l.push(`${_}[${h}]=${c(p)}`)});break;case"Set":u.push("new Set"),l.push(`${_}.${Array.from(f).map(p=>`add(${c(p)})`).join(".")}`);break;case"Map":u.push("new Map"),l.push(`${_}.${Array.from(f).map(([p,h])=>`set(${c(p)}, ${c(h)})`).join(".")}`);break;default:u.push(Object.getPrototypeOf(f)===null?"Object.create(null)":"{}"),Object.keys(f).forEach(p=>{l.push(`${_}${er(p)}=${c(f[p])}`)})}}),l.push(`return ${d}`),`(function(${a.join(",")}){${l.join(";")}}(${u.join(",")}))`}else return d}function Yt(e){let t="";do t=ce[e%ce.length]+t,e=~~(e/ce.length)-1;while(e>=0);return Xt.test(t)?`${t}0`:t}function Kt(e){return Bt[e]||e}function Ye(e){return e.replace(Zt,Kt)}function Qt(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?e:Ye(JSON.stringify(e))}function er(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?`.${e}`:`[${Ye(JSON.stringify(e))}]`}function ue(e){if(typeof e=="string")return z(e);if(e===void 0)return"void 0";if(e===0&&1/e<0)return"-0";const t=String(e);return typeof e=="number"?t.replace(/^(-)?0\./,"$1."):typeof e=="bigint"?e+"n":t}const Ke=-1,tr=-2,rr=-3,nr=-4,sr=-5,Qe=-6;function re(e,t){const r=[],n=new Map,s=[];for(const a in t)s.push({key:a,fn:t[a]});const o=[];let i=0;function c(a){if(typeof a=="function")throw new J("Cannot stringify a function",o);if(n.has(a))return n.get(a);if(a===void 0)return Ke;if(Number.isNaN(a))return rr;if(a===1/0)return nr;if(a===-1/0)return sr;if(a===0&&1/a<0)return Qe;const l=i++;n.set(a,l);for(const{key:_,fn:f}of s){const y=f(a);if(y)return r[l]=`["${_}",${c(y)}]`,l}let u="";if(M(a))u=le(a);else switch(te(a)){case"Number":case"String":case"Boolean":u=`["Object",${le(a)}]`;break;case"BigInt":u=`["BigInt",${a}]`;break;case"Date":u=`["Date","${a.toISOString()}"]`;break;case"RegExp":const{source:f,flags:y}=a;u=y?`["RegExp",${z(f)},"${y}"]`:`["RegExp",${z(f)}]`;break;case"Array":u="[";for(let p=0;p<a.length;p+=1)p>0&&(u+=","),p in a?(o.push(`[${p}]`),u+=c(a[p]),o.pop()):u+=tr;u+="]";break;case"Set":u='["Set"';for(const p of a)u+=`,${c(p)}`;u+="]";break;case"Map":u='["Map"';for(const[p,h]of a)o.push(`.get(${M(p)?le(p):"..."})`),u+=`,${c(p)},${c(h)}`;u+="]";break;default:if(!Xe(a))throw new J("Cannot stringify arbitrary non-POJOs",o);if(Object.getOwnPropertySymbols(a).length>0)throw new J("Cannot stringify POJOs with symbolic keys",o);if(Object.getPrototypeOf(a)===null){u='["null"';for(const p in a)o.push(`.${p}`),u+=`,${z(p)},${c(a[p])}`,o.pop();u+="]"}else{u="{";let p=!1;for(const h in a)p&&(u+=","),p=!0,o.push(`.${h}`),u+=`${z(h)}:${c(a[h])}`,o.pop();u+="}"}}return r[l]=u,l}const d=c(e);return d<0?`${d}`:`[${r.join(",")}]`}function le(e){const t=typeof e;return t==="string"?z(e):e instanceof String?z(e.toString()):e===void 0?Ke.toString():e===0&&1/e<0?Qe.toString():t==="bigint"?`["BigInt","${e}"]`:String(e)}function et(e){return we(e.request.headers.get("accept")??"*/*",["application/json","text/html"])==="application/json"&&e.request.method==="POST"}async function or(e,t,r){const n=r?.actions;if(!n){const s=$e(405,"POST method not allowed. No actions exist for this page");return G({type:"error",error:await P(e,t,s)},{status:s.status,headers:{allow:"GET"}})}nt(n);try{const s=await st(e,n);return s instanceof ge?G({type:"failure",status:s.status,data:Ce(s.data,e.route.id)}):G({type:"success",status:s?200:204,data:Ce(s,e.route.id)})}catch(s){const o=s;return o instanceof U?rt(o):G({type:"error",error:await P(e,t,tt(o))},{status:o instanceof I?o.status:500})}}function tt(e){return e instanceof ge?new Error('Cannot "throw fail()". Use "return fail()"'):e}function rt(e){return G({type:"redirect",status:e.status,location:e.location})}function G(e,t){return be(e,t)}function ar(e){return e.request.method==="POST"}async function ir(e,t){const r=t?.actions;if(!r)return e.setHeaders({allow:"GET"}),{type:"error",error:$e(405,"POST method not allowed. No actions exist for this page")};nt(r);try{const n=await st(e,r);return n instanceof ge?{type:"failure",status:n.status,data:n.data}:{type:"success",status:200,data:n}}catch(n){const s=n;return s instanceof U?{type:"redirect",status:s.status,location:s.location}:{type:"error",error:tt(s)}}}function nt(e){if(e.default&&Object.keys(e).length>1)throw new Error("When using named actions, the default action cannot be used. See the docs for more info: https://kit.svelte.dev/docs/form-actions#named-actions")}async function st(e,t){const r=new URL(e.request.url);let n="default";for(const o of r.searchParams)if(o[0].startsWith("/")){if(n=o[0].slice(1),n==="default")throw new Error('Cannot use reserved action name "default"');break}const s=t[n];if(!s)throw new Error(`No action with name '${n}' found`);if(!Fe(e.request))throw new Error(`Actions expect form-encoded data (received ${e.request.headers.get("content-type")})`);return s(e)}function cr(e,t){return ot(e,F,t)}function Ce(e,t){return ot(e,re,t)}function ot(e,t,r){try{return t(e)}catch(n){const s=n;if("path"in s){let o=`Data returned from action inside ${r} is not serializable: ${s.message}`;throw s.path!==""&&(o+=` (data.${s.path})`),new Error(o)}throw s}}async function at(e){for(const t in e)if(typeof e[t]?.then=="function")return Object.fromEntries(await Promise.all(Object.entries(e).map(async([r,n])=>[r,await n])));return e}const Ne="x-sveltekit-invalidated";async function Ee({event:e,state:t,node:r,parent:n,track_server_fetches:s}){if(!r?.server)return null;const o={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},i=Mt(e.url,()=>{o.url=!0});t.prerendering&&Ze(i);const c=await r.server.load?.call(null,{...e,fetch:(a,l)=>{const u=new URL(a instanceof Request?a.url:a,e.url);return s&&o.dependencies.add(u.href),e.fetch(a,l)},depends:(...a)=>{for(const l of a){const{href:u}=new URL(l,e.url);o.dependencies.add(u)}},params:new Proxy(e.params,{get:(a,l)=>(o.params.add(l),a[l])}),parent:async()=>(o.parent=!0,n()),route:new Proxy(e.route,{get:(a,l)=>(o.route=!0,a[l])}),url:i});return{type:"data",data:c?await at(c):null,uses:o,slash:r.server.trailingSlash}}async function it({event:e,fetched:t,node:r,parent:n,server_data_promise:s,state:o,resolve_opts:i,csr:c}){const d=await s;if(!r?.universal?.load)return d?.data??null;const a=await r.universal.load.call(null,{url:e.url,params:e.params,data:d?.data??null,route:e.route,fetch:ur(e,o,t,c,i),setHeaders:e.setHeaders,depends:()=>{},parent:n});return a?await at(a):null}function ur(e,t,r,n,s){return async(o,i)=>{const c=o instanceof Request&&o.body?o.clone().body:null;let d=await e.fetch(o,i);const a=new URL(o instanceof Request?o.url:o,e.url),l=a.origin===e.url.origin;let u;if(l)t.prerendering&&(u={response:d,body:null},t.prerendering.dependencies.set(a.pathname,u));else if((o instanceof Request?o.mode:i?.mode??"cors")==="no-cors")d=new Response("",{status:d.status,statusText:d.statusText,headers:d.headers});else{const y=d.headers.get("access-control-allow-origin");if(!y||y!==e.url.origin&&y!=="*")throw new Error(`CORS error: ${y?"Incorrect":"No"} 'Access-Control-Allow-Origin' header is present on the requested resource`)}const _=new Proxy(d,{get(f,y,p){async function h(){const m=await f.text();if(!m||typeof m=="string"){const b=Number(f.status);if(isNaN(b))throw new Error(`response.status is not a number. value: "${f.status}" type: ${typeof f.status}`);r.push({url:l?a.href.slice(e.url.origin.length):a.href,method:e.request.method,request_body:o instanceof Request&&c?await lr(c):i?.body,request_headers:i?.headers,response_body:m,response:f})}return u&&(u.body=m),m}return y==="arrayBuffer"?async()=>{const m=await f.arrayBuffer();return u&&(u.body=new Uint8Array(m)),m}:y==="text"?h:y==="json"?async()=>JSON.parse(await h()):Reflect.get(f,y,f)}});if(n){const f=d.headers.get;d.headers.get=y=>{const p=y.toLowerCase(),h=f.call(d.headers,p);if(h&&!p.startsWith("x-sveltekit-")&&!s.filterSerializedResponseHeaders(p,h))throw new Error(`Failed to get response header "${p}" â€” it must be included by the \`filterSerializedResponseHeaders\` option: https://kit.svelte.dev/docs/hooks#server-hooks-handle (at ${e.route.id})`);return h}}return _}}async function lr(e){let t="";const r=e.getReader(),n=new TextDecoder;for(;;){const{done:s,value:o}=await r.read();if(s)break;t+=n.decode(o)}return t}function ct(...e){let t=5381;for(const r of e)if(typeof r=="string"){let n=r.length;for(;n;)t=t*33^r.charCodeAt(--n)}else if(ArrayBuffer.isView(r)){const n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let s=n.length;for(;s;)t=t*33^n[--s]}else throw new TypeError("value must be a string or TypedArray");return(t>>>0).toString(36)}const ut={"&":"&amp;",'"':"&quot;"},fr=new RegExp(`[${Object.keys(ut).join("")}]|[\\ud800-\\udbff](?![\\udc00-\\udfff])|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\udc00-\\udfff]`,"g");function lt(e){return`"${e.replace(fr,r=>r.length===2?r:ut[r]??`&#${r.charCodeAt(0)};`)}"`}const ft={"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"},dr=new RegExp(`[${Object.keys(ft).join("")}]`,"g");function pr(e,t,r=!1){const n={};let s=null,o=null,i=!1;for(const[l,u]of e.response.headers)t(l,u)&&(n[l]=u),l==="cache-control"&&(s=u),l==="age"&&(o=u),l==="vary"&&(i=!0);const c={status:e.response.status,statusText:e.response.statusText,headers:n,body:e.response_body},d=JSON.stringify(c).replace(dr,l=>ft[l]),a=['type="application/json"',"data-sveltekit-fetched",`data-url=${lt(e.url)}`];if(e.request_headers||e.request_body){const l=[];e.request_headers&&l.push([...new Headers(e.request_headers)].join(",")),e.request_body&&l.push(e.request_body),a.push(`data-hash="${ct(...l)}"`)}if(!r&&e.method==="GET"&&s&&!i){const l=/s-maxage=(\d+)/g.exec(s)??/max-age=(\d+)/g.exec(s);if(l){const u=+l[1]-+(o??"0");a.push(`data-ttl="${u}"`)}}return`<script ${a.join(" ")}>${d}<\/script>`}const D=JSON.stringify,hr=new TextEncoder;function qe(e){pe[0]||yr();const t=dt.slice(0),r=_r(e);for(let s=0;s<r.length;s+=16){const o=r.subarray(s,s+16);let i,c,d,a=t[0],l=t[1],u=t[2],_=t[3],f=t[4],y=t[5],p=t[6],h=t[7];for(let m=0;m<64;m++)m<16?i=o[m]:(c=o[m+1&15],d=o[m+14&15],i=o[m&15]=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+o[m&15]+o[m+9&15]|0),i=i+h+(f>>>6^f>>>11^f>>>25^f<<26^f<<21^f<<7)+(p^f&(y^p))+pe[m],h=p,p=y,y=f,f=_+i|0,_=u,u=l,l=a,a=i+(l&u^_&(l^u))+(l>>>2^l>>>13^l>>>22^l<<30^l<<19^l<<10)|0;t[0]=t[0]+a|0,t[1]=t[1]+l|0,t[2]=t[2]+u|0,t[3]=t[3]+_|0,t[4]=t[4]+f|0,t[5]=t[5]+y|0,t[6]=t[6]+p|0,t[7]=t[7]+h|0}const n=new Uint8Array(t.buffer);return pt(n),ht(n)}const dt=new Uint32Array(8),pe=new Uint32Array(64);function yr(){function e(r){return(r-Math.floor(r))*4294967296}let t=2;for(let r=0;r<64;t++){let n=!0;for(let s=2;s*s<=t;s++)if(t%s===0){n=!1;break}n&&(r<8&&(dt[r]=e(t**(1/2))),pe[r]=e(t**(1/3)),r++)}}function pt(e){for(let t=0;t<e.length;t+=4){const r=e[t+0],n=e[t+1],s=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=s,e[t+2]=n,e[t+3]=r}}function _r(e){const t=hr.encode(e),r=t.length*8,n=512*Math.ceil((r+65)/512),s=new Uint8Array(n/8);s.set(t),s[t.length]=128,pt(s);const o=new Uint32Array(s.buffer);return o[o.length-2]=Math.floor(r/4294967296),o[o.length-1]=r,o}const N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");function ht(e){const t=e.length;let r="",n;for(n=2;n<t;n+=3)r+=N[e[n-2]>>2],r+=N[(e[n-2]&3)<<4|e[n-1]>>4],r+=N[(e[n-1]&15)<<2|e[n]>>6],r+=N[e[n]&63];return n===t+1&&(r+=N[e[n-2]>>2],r+=N[(e[n-2]&3)<<4],r+="=="),n===t&&(r+=N[e[n-2]>>2],r+=N[(e[n-2]&3)<<4|e[n-1]>>4],r+=N[(e[n-1]&15)<<2],r+="="),r}const Ie=new Uint8Array(16);function mr(){return crypto.getRandomValues(Ie),ht(Ie)}const wr=new Set(["self","unsafe-eval","unsafe-hashes","unsafe-inline","none","strict-dynamic","report-sample","wasm-unsafe-eval","script"]),gr=/^(nonce|sha\d\d\d)-/;class yt{#e;#t;#s;#o;#r;#n;#a;constructor(t,r,n){this.#e=t,this.#o=r;const s=this.#o;this.#r=[],this.#n=[];const o=s["script-src"]||s["default-src"],i=s["style-src"]||s["default-src"];this.#t=!!o&&o.filter(c=>c!=="unsafe-inline").length>0,this.#s=!!i&&i.filter(c=>c!=="unsafe-inline").length>0,this.script_needs_nonce=this.#t&&!this.#e,this.style_needs_nonce=this.#s&&!this.#e,this.#a=n}add_script(t){this.#t&&(this.#e?this.#r.push(`sha256-${qe(t)}`):this.#r.length===0&&this.#r.push(`nonce-${this.#a}`))}add_style(t){this.#s&&(this.#e?this.#n.push(`sha256-${qe(t)}`):this.#n.length===0&&this.#n.push(`nonce-${this.#a}`))}get_header(t=!1){const r=[],n={...this.#o};this.#n.length>0&&(n["style-src"]=[...n["style-src"]||n["default-src"]||[],...this.#n]),this.#r.length>0&&(n["script-src"]=[...n["script-src"]||n["default-src"]||[],...this.#r]);for(const s in n){if(t&&(s==="frame-ancestors"||s==="report-uri"||s==="sandbox"))continue;const o=n[s];if(!o)continue;const i=[s];Array.isArray(o)&&o.forEach(c=>{wr.has(c)||gr.test(c)?i.push(`'${c}'`):i.push(c)}),r.push(i.join(" "))}return r.join("; ")}}class $r extends yt{get_meta(){const t=this.get_header(!0);if(t)return`<meta http-equiv="content-security-policy" content=${lt(t)}>`}}class br extends yt{constructor(t,r,n){if(super(t,r,n),Object.values(r).filter(s=>!!s).length>0){const s=r["report-to"]?.length??0>0,o=r["report-uri"]?.length??0>0;if(!s&&!o)throw Error("`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both")}}}class vr{nonce=mr();csp_provider;report_only_provider;constructor({mode:t,directives:r,reportOnly:n},{prerender:s}){const o=t==="hash"||t==="auto"&&s;this.csp_provider=new $r(o,r,this.nonce),this.report_only_provider=new br(o,n,this.nonce)}get script_needs_nonce(){return this.csp_provider.script_needs_nonce||this.report_only_provider.script_needs_nonce}get style_needs_nonce(){return this.csp_provider.style_needs_nonce||this.report_only_provider.style_needs_nonce}add_script(t){this.csp_provider.add_script(t),this.report_only_provider.add_script(t)}add_style(t){this.csp_provider.add_style(t),this.report_only_provider.add_style(t)}}function Ue(){let e,t;return{promise:new Promise((n,s)=>{e=n,t=s}),fulfil:e,reject:t}}function _t(){const e=[Ue()];return{iterator:{[Symbol.asyncIterator](){return{next:async()=>{const t=await e[0].promise;return t.done||e.shift(),t}}}},push:t=>{e[e.length-1].fulfil({value:t,done:!1}),e.push(Ue())},done:()=>{e[e.length-1].fulfil({done:!0})}}}const kr="/_svelte_kit_assets",jr={...At(!1),check:()=>!1},ze=new TextEncoder;async function Z({branch:e,fetched:t,options:r,manifest:n,state:s,page_config:o,status:i,error:c=null,event:d,resolve_opts:a,action_result:l}){if(s.prerendering){if(r.csp.mode==="nonce")throw new Error('Cannot use prerendering if config.kit.csp.mode === "nonce"');if(r.app_template_contains_nonce)throw new Error("Cannot use prerendering if page template contains %sveltekit.nonce%")}const{client:u}=n._,_=new Set(u.imports),f=new Set(u.stylesheets),y=new Set(u.fonts),p=new Set,h=new Map;let m;const b=l?.type==="success"||l?.type==="failure"?l.data??null:null;let w=C,v=H,g=D(C);if(s.prerendering?.fallback||(w=d.url.pathname.slice(C.length).split("/").slice(2).map(()=>"..").join("/")||".",g=`new URL(${D(w)}, location).pathname.slice(0, -1)`,(!H||H[0]==="/"&&H!==kr)&&(v=w)),o.ssr){const k={stores:{page:Oe(null),navigating:Oe(null),updated:jr},constructors:await Promise.all(e.map(({node:S})=>S.component())),form:b};let E={};for(let S=0;S<e.length;S+=1)E={...E,...e[S].data},k[`data_${S}`]=E;k.page={error:c,params:d.params,route:d.route,status:i,url:d.url,data:E,form:b};try{m=r.root.render(k)}finally{St()}for(const{node:S}of e){for(const R of S.imports)_.add(R);for(const R of S.stylesheets)f.add(R);for(const R of S.fonts)y.add(R);S.inline_styles&&Object.entries(await S.inline_styles()).forEach(([R,K])=>h.set(R,K))}}else m={head:"",html:"",css:{code:"",map:null}};let $="",j=m.html;const x=new vr(r.csp,{prerender:!!s.prerendering}),O=k=>k.startsWith("/")?C+k:`${v}/${k}`;if(h.size>0){const k=Array.from(h.values()).join(`
`),E=[];x.style_needs_nonce&&E.push(` nonce="${x.nonce}"`),x.add_style(k),$+=`
	<style${E.join("")}>${k}</style>`}for(const k of f){const E=O(k),S=['rel="stylesheet"'];if(h.has(k))S.push("disabled",'media="(max-width: 0)"');else if(a.preload({type:"css",path:E})){const R=['rel="preload"','as="style"'];p.add(`<${encodeURI(E)}>; ${R.join(";")}; nopush`)}$+=`
		<link href="${E}" ${S.join(" ")}>`}for(const k of y){const E=O(k);if(a.preload({type:"font",path:E})){const R=['rel="preload"','as="font"',`type="font/${k.slice(k.lastIndexOf(".")+1)}"`,`href="${E}"`,"crossorigin"];$+=`
		<link ${R.join(" ")}>`}}const L=`__sveltekit_${r.version_hash}`,{data:B,chunks:Y}=Er(d,r,e.map(k=>k.server_data),L);if(o.ssr&&o.csr&&(j+=`
			${t.map(k=>pr(k,a.filterSerializedResponseHeaders,!!s.prerendering)).join(`
			`)}`),o.csr){const k=Array.from(_,T=>O(T)).filter(T=>a.preload({type:"js",path:T}));for(const T of k)p.add(`<${encodeURI(T)}>; rel="modulepreload"; nopush`),r.preload_strategy!=="modulepreload"?$+=`
		<link rel="preload" as="script" crossorigin="anonymous" href="${T}">`:s.prerendering&&($+=`
		<link rel="modulepreload" href="${T}">`);const E=[],S=[H&&`assets: ${D(H)}`,`base: ${g}`,`env: ${D(Se)}`].filter(Boolean);Y&&(E.push("const deferred = new Map();"),S.push(`defer: (id) => new Promise((fulfil, reject) => {
							deferred.set(id, { fulfil, reject });
						})`),S.push(`resolve: ({ id, data, error }) => {
							const { fulfil, reject } = deferred.get(id);
							deferred.delete(id);

							if (error) reject(error);
							else fulfil(data);
						}`)),E.push(`${L} = {
						${S.join(`,
						`)}
					};`);const R=["app","element"];if(E.push("const element = document.currentScript.parentElement;"),o.ssr){const T={form:"null",error:"null"};E.push(`const data = ${B};`),b&&(T.form=cr(b,d.route.id)),c&&(T.error=F(c));const ie=[`node_ids: [${e.map(({node:xt})=>xt.index).join(", ")}]`,"data",`form: ${T.form}`,`error: ${T.error}`];i!==200&&ie.push(`status: ${i}`),r.embedded&&ie.push(`params: ${F(d.params)}`,`route: ${D(d.route)}`),R.push(`{
							${ie.join(`,
							`)}
						}`)}if(E.push(`Promise.all([
						import(${D(O(u.start))}),
						import(${D(O(u.app))})
					]).then(([kit, app]) => {
						kit.start(${R.join(", ")});
					});`),r.service_worker){const T="";E.push(`if ('serviceWorker' in navigator) {
						addEventListener('load', function () {
							navigator.serviceWorker.register('${O("service-worker.js")}'${T});
						});
					}`)}const K=`
				{
					${E.join(`

					`)}
				}
			`;x.add_script(K),j+=`
			<script${x.script_needs_nonce?` nonce="${x.nonce}"`:""}>${K}<\/script>
		`}const V=new Headers({"x-sveltekit-page":"true","content-type":"text/html"});if(s.prerendering){const k=[],E=x.csp_provider.get_meta();E&&k.push(E),s.prerendering.cache&&k.push(`<meta http-equiv="cache-control" content="${s.prerendering.cache}">`),k.length>0&&($=k.join(`
`)+$)}else{const k=x.csp_provider.get_header();k&&V.set("content-security-policy",k);const E=x.report_only_provider.get_header();E&&V.set("content-security-policy-report-only",E),p.size&&V.set("link",Array.from(p).join(", "))}$+=m.head;const Et=r.templates.app({head:$,body:j,assets:v,nonce:x.nonce,env:Se}),ae=await a.transformPageChunk({html:Et,done:!0})||"";return Y||V.set("etag",`"${ct(ae)}"`),Y?new Response(new ReadableStream({async start(k){k.enqueue(ze.encode(ae+`
`));for await(const E of Y)k.enqueue(ze.encode(E));k.close()},type:"bytes"}),{headers:{"content-type":"text/html"}}):A(ae,{status:i,headers:V})}function Er(e,t,r,n){let s=1,o=0;const{iterator:i,push:c,done:d}=_t();function a(l){if(typeof l?.then=="function"){const u=s++;return o+=1,l.then(_=>({data:_})).catch(async _=>({error:await P(e,t,_)})).then(async({data:_,error:f})=>{o-=1;let y;try{y=F({id:u,data:_,error:f},a)}catch{f=await P(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`)),_=void 0,y=F({id:u,data:_,error:f},a)}c(`<script>${n}.resolve(${y})<\/script>
`),o===0&&d()}),`${n}.defer(${u})`}}try{return{data:`[${r.map(u=>u?`{"type":"data","data":${F(u.data,a)},${Ge(u)}${u.slash?`,"slash":${JSON.stringify(u.slash)}`:""}}`:"null").join(",")}]`,chunks:o>0?i:null}}catch(l){throw new Error(Ve(e,l))}}function q(e,t){return e.reduce((r,n)=>n?.universal?.[t]??n?.server?.[t]??r,void 0)}async function mt({event:e,options:t,manifest:r,state:n,status:s,error:o,resolve_opts:i}){const c=[];try{const d=[],a=await r._.nodes[0](),l=q([a],"ssr")??!0,u=q([a],"csr")??!0;if(l){n.error=!0;const _=Ee({event:e,state:n,node:a,parent:async()=>({}),track_server_fetches:t.track_server_fetches}),f=await _,y=await it({event:e,fetched:c,node:a,parent:async()=>({}),resolve_opts:i,server_data_promise:_,state:n,csr:u});d.push({node:a,server_data:f,data:y},{node:await r._.nodes[1](),data:null,server_data:null})}return await Z({options:t,manifest:r,state:n,page_config:{ssr:l,csr:q([a],"csr")??!0},status:s,error:await P(e,t,o),branch:d,fetched:c,event:e,resolve_opts:i})}catch(d){return d instanceof U?ne(d.status,d.location):ve(t,d instanceof I?d.status:500,(await P(e,t,d)).message)}}function xr(e){let t=!1,r;return()=>t?r:(t=!0,r=e())}const De=new TextEncoder;async function Sr(e,t,r,n,s,o,i){if(!t.page)return new Response(void 0,{status:404});try{const c=[...t.page.layouts,t.page.leaf],d=o??c.map(()=>!0);let a=!1;const l=new URL(e.url);l.pathname=ke(l.pathname,i);const u={...e,url:l},_=c.map((b,w)=>xr(async()=>{try{if(a)return{type:"skip"};const v=b==null?b:await n._.nodes[b]();return Ee({event:u,state:s,node:v,parent:async()=>{const g={};for(let $=0;$<w;$+=1){const j=await _[$]();j&&Object.assign(g,j.data)}return g},track_server_fetches:r.track_server_fetches})}catch(v){throw a=!0,v}})),f=_.map(async(b,w)=>d[w]?b():{type:"skip"});let y=f.length;const p=await Promise.all(f.map((b,w)=>b.catch(async v=>{if(v instanceof U)throw v;return y=Math.min(y,w+1),{type:"error",error:await P(e,r,v),status:v instanceof I?v.status:void 0}}))),{data:h,chunks:m}=wt(e,r,p);return m?new Response(new ReadableStream({async start(b){b.enqueue(De.encode(h));for await(const w of m)b.enqueue(De.encode(w));b.close()},type:"bytes"}),{headers:{"content-type":"text/sveltekit-data","cache-control":"private, no-store"}}):he(h)}catch(c){const d=c;return d instanceof U?ye(d):he(await P(e,r,d),500)}}function he(e,t=200){return A(typeof e=="string"?e:JSON.stringify(e),{status:t,headers:{"content-type":"application/json","cache-control":"private, no-store"}})}function ye(e){return he({type:"redirect",location:e.location})}function wt(e,t,r){let n=1,s=0;const{iterator:o,push:i,done:c}=_t(),d={Promise:a=>{if(typeof a?.then=="function"){const l=n++;s+=1;let u="data";return a.catch(async _=>(u="error",P(e,t,_))).then(async _=>{let f;try{f=re(_,d)}catch{const p=await P(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`));u="error",f=re(p,d)}s-=1,i(`{"type":"chunk","id":${l},"${u}":${f}}
`),s===0&&c()}),l}}};try{return{data:`{"type":"data","nodes":[${r.map(l=>l?l.type==="error"||l.type==="skip"?JSON.stringify(l):`{"type":"data","data":${re(l.data,d)},${Ge(l)}${l.slash?`,"slash":${JSON.stringify(l.slash)}`:""}}`:"null").join(",")}]}
`,chunks:s>0?o:null}}catch(a){throw new Error(Ve(e,a))}}const Or=10;async function Rr(e,t,r,n,s,o){if(s.depth>Or)return A(`Not found: ${e.url.pathname}`,{status:404});if(et(e)){const i=await n._.nodes[t.leaf]();return or(e,r,i?.server)}try{const i=await Promise.all([...t.layouts.map(w=>w==null?w:n._.nodes[w]()),n._.nodes[t.leaf]()]),c=i.at(-1);let d=200,a;if(ar(e)){if(a=await ir(e,c.server),a?.type==="redirect")return ne(a.status,a.location);if(a?.type==="error"){const w=a.error;d=w instanceof I?w.status:500}a?.type==="failure"&&(d=a.status)}const l=i.some(w=>w?.server),u=Ft(e.url.pathname),_=q(i,"prerender")??!1;if(_){if(c.server?.actions)throw new Error("Cannot prerender pages with actions")}else if(s.prerendering)return new Response(void 0,{status:204});s.prerender_default=_;const f=[];if(q(i,"ssr")===!1)return await Z({branch:[],fetched:f,page_config:{ssr:!1,csr:q(i,"csr")??!0},status:d,error:null,event:e,options:r,manifest:n,state:s,resolve_opts:o});const y=[];let p=null;const h=i.map((w,v)=>{if(p)throw p;return Promise.resolve().then(async()=>{try{if(w===c&&a?.type==="error")throw a.error;return await Ee({event:e,state:s,node:w,parent:async()=>{const g={};for(let $=0;$<v;$+=1){const j=await h[$];j&&Object.assign(g,await j.data)}return g},track_server_fetches:r.track_server_fetches})}catch(g){throw p=g,p}})}),m=q(i,"csr")??!0,b=i.map((w,v)=>{if(p)throw p;return Promise.resolve().then(async()=>{try{return await it({event:e,fetched:f,node:w,parent:async()=>{const g={};for(let $=0;$<v;$+=1)Object.assign(g,await b[$]);return g},resolve_opts:o,server_data_promise:h[v],state:s,csr:m})}catch(g){throw p=g,p}})});for(const w of h)w.catch(()=>{});for(const w of b)w.catch(()=>{});for(let w=0;w<i.length;w+=1){const v=i[w];if(v)try{const g=await h[w],$=await b[w];y.push({node:v,server_data:g,data:$})}catch(g){const $=g;if($ instanceof U){if(s.prerendering&&l){const O=JSON.stringify({type:"redirect",location:$.location});s.prerendering.dependencies.set(u,{response:A(O),body:O})}return ne($.status,$.location)}const j=$ instanceof I?$.status:500,x=await P(e,r,$);for(;w--;)if(t.errors[w]){const O=t.errors[w],L=await n._.nodes[O]();let B=w;for(;!y[B];)B-=1;return await Z({event:e,options:r,manifest:n,state:s,resolve_opts:o,page_config:{ssr:!0,csr:!0},status:j,error:x,branch:Ae(y.slice(0,B+1)).concat({node:L,data:null,server_data:null}),fetched:f})}return ve(r,j,x.message)}else y.push(null)}if(s.prerendering&&l){let{data:w,chunks:v}=wt(e,r,y.map(g=>g?.server_data));if(v)for await(const g of v)w+=g;s.prerendering.dependencies.set(u,{response:A(w),body:w})}return await Z({event:e,options:r,manifest:n,state:s,resolve_opts:o,page_config:{csr:q(i,"csr")??!0,ssr:!0},status:d,error:null,branch:Ae(y),action_result:a,fetched:f})}catch(i){return await mt({event:e,options:r,manifest:n,state:s,status:500,error:i,resolve_opts:o})}}/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Q=Ar,gt=Pr,Tr=Object.prototype.toString,ee=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Ar(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var r={},n=t||{},s=n.decode||Cr,o=0;o<e.length;){var i=e.indexOf("=",o);if(i===-1)break;var c=e.indexOf(";",o);if(c===-1)c=e.length;else if(c<i){o=e.lastIndexOf(";",i-1)+1;continue}var d=e.slice(o,i).trim();if(r[d]===void 0){var a=e.slice(i+1,c).trim();a.charCodeAt(0)===34&&(a=a.slice(1,-1)),r[d]=Ir(a,s)}o=c+1}return r}function Pr(e,t,r){var n=r||{},s=n.encode||Nr;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!ee.test(e))throw new TypeError("argument name is invalid");var o=s(t);if(o&&!ee.test(o))throw new TypeError("argument val is invalid");var i=e+"="+o;if(n.maxAge!=null){var c=n.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(c)}if(n.domain){if(!ee.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain="+n.domain}if(n.path){if(!ee.test(n.path))throw new TypeError("option path is invalid");i+="; Path="+n.path}if(n.expires){var d=n.expires;if(!qr(d)||isNaN(d.valueOf()))throw new TypeError("option expires is invalid");i+="; Expires="+d.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.priority){var a=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(a){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var l=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(l){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i}function Cr(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function Nr(e){return encodeURIComponent(e)}function qr(e){return Tr.call(e)==="[object Date]"||e instanceof Date}function Ir(e,t){try{return t(e)}catch{return e}}function Ur(e,t,r){const n=e.headers.get("cookie")??"",s=Q(n,{decode:_=>_}),i=ke(t.pathname,r).split("/").slice(0,-1).join("/")||"/",c={},d={httpOnly:!0,sameSite:"lax",secure:!(t.hostname==="localhost"&&t.protocol==="http:")},a={get(_,f){const y=c[_];if(y&&fe(t.hostname,y.options.domain)&&de(t.pathname,y.options.path))return y.value;const p=f?.decode||decodeURIComponent;return Q(n,{decode:p})[_]},getAll(_){const f=_?.decode||decodeURIComponent,y=Q(n,{decode:f});for(const p of Object.values(c))fe(t.hostname,p.options.domain)&&de(t.pathname,p.options.path)&&(y[p.name]=p.value);return Object.entries(y).map(([p,h])=>({name:p,value:h}))},set(_,f,y={}){u(_,f,{...d,...y})},delete(_,f={}){a.set(_,"",{...f,maxAge:0})},serialize(_,f,y){return gt(_,f,{...d,...y})}};function l(_,f){const y={...s};for(const p in c){const h=c[p];if(!fe(_.hostname,h.options.domain)||!de(_.pathname,h.options.path))continue;const m=h.options.encode||encodeURIComponent;y[h.name]=m(h.value)}if(f){const p=Q(f,{decode:h=>h});for(const h in p)y[h]=p[h]}return Object.entries(y).map(([p,h])=>`${p}=${h}`).join("; ")}function u(_,f,y){const p=y.path??i;c[_]={name:_,value:f,options:{...y,path:p}}}return{cookies:a,new_cookies:c,get_cookie_header:l,set_internal:u}}function fe(e,t){if(!t)return!0;const r=t[0]==="."?t.slice(1):t;return e===r?!0:e.endsWith("."+r)}function de(e,t){if(!t)return!0;const r=t.endsWith("/")?t.slice(0,-1):t;return e===r?!0:e.startsWith(r+"/")}function He(e,t){for(const r of t){const{name:n,value:s,options:o}=r;e.append("set-cookie",gt(n,s,o))}}var se={exports:{}},W={decodeValues:!0,map:!1,silent:!1};function _e(e){return typeof e=="string"&&!!e.trim()}function me(e,t){var r=e.split(";").filter(_e),n=r.shift(),s=zr(n),o=s.name,i=s.value;t=t?Object.assign({},W,t):W;try{i=t.decodeValues?decodeURIComponent(i):i}catch(d){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+i+"'. Set options.decodeValues to false to disable this feature.",d)}var c={name:o,value:i};return r.forEach(function(d){var a=d.split("="),l=a.shift().trimLeft().toLowerCase(),u=a.join("=");l==="expires"?c.expires=new Date(u):l==="max-age"?c.maxAge=parseInt(u,10):l==="secure"?c.secure=!0:l==="httponly"?c.httpOnly=!0:l==="samesite"?c.sameSite=u:c[l]=u}),c}function zr(e){var t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}function $t(e,t){if(t=t?Object.assign({},W,t):W,!e)return t.map?{}:[];if(e.headers)if(typeof e.headers.getSetCookie=="function")e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var r=e.headers[Object.keys(e.headers).find(function(s){return s.toLowerCase()==="set-cookie"})];!r&&e.headers.cookie&&!t.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=r}if(Array.isArray(e)||(e=[e]),t=t?Object.assign({},W,t):W,t.map){var n={};return e.filter(_e).reduce(function(s,o){var i=me(o,t);return s[i.name]=i,s},n)}else return e.filter(_e).map(function(s){return me(s,t)})}function Dr(e){if(Array.isArray(e))return e;if(typeof e!="string")return[];var t=[],r=0,n,s,o,i,c;function d(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function a(){return s=e.charAt(r),s!=="="&&s!==";"&&s!==","}for(;r<e.length;){for(n=r,c=!1;d();)if(s=e.charAt(r),s===","){for(o=r,r+=1,d(),i=r;r<e.length&&a();)r+=1;r<e.length&&e.charAt(r)==="="?(c=!0,r=i,t.push(e.substring(n,o)),n=r):r=o+1}else r+=1;(!c||r>=e.length)&&t.push(e.substring(n,e.length))}return t}se.exports=$t;se.exports.parse=$t;var Hr=se.exports.parseString=me,Lr=se.exports.splitCookiesString=Dr;function Mr({event:e,options:t,manifest:r,state:n,get_cookie_header:s,set_internal:o}){return async(i,c)=>{const d=Le(i,c,e.url);let a=(i instanceof Request?i.mode:c?.mode)??"cors",l=(i instanceof Request?i.credentials:c?.credentials)??"same-origin";return await t.hooks.handleFetch({event:e,request:d,fetch:async(u,_)=>{const f=Le(u,_,e.url),y=new URL(f.url);if(f.headers.has("origin")||f.headers.set("origin",e.url.origin),u!==d&&(a=(u instanceof Request?u.mode:_?.mode)??"cors",l=(u instanceof Request?u.credentials:_?.credentials)??"same-origin"),(f.method==="GET"||f.method==="HEAD")&&(a==="no-cors"&&y.origin!==e.url.origin||y.origin===e.url.origin)&&f.headers.delete("origin"),y.origin!==e.url.origin){if(`.${y.hostname}`.endsWith(`.${e.url.hostname}`)&&l!=="omit"){const j=s(y,f.headers.get("cookie"));j&&f.headers.set("cookie",j)}return fetch(f)}const p=H||C,h=decodeURIComponent(y.pathname),m=(h.startsWith(p)?h.slice(p.length):h).slice(1),b=`${m}/index.html`,w=r.assets.has(m),v=r.assets.has(b);if(w||v){const j=w?m:b;if(n.read){const x=w?r.mimeTypes[m.slice(m.lastIndexOf("."))]:"text/html";return new Response(n.read(j),{headers:x?{"content-type":x}:{}})}return await fetch(f)}if(l!=="omit"){const j=s(y,f.headers.get("cookie"));j&&f.headers.set("cookie",j);const x=e.request.headers.get("authorization");x&&!f.headers.has("authorization")&&f.headers.set("authorization",x)}f.headers.has("accept")||f.headers.set("accept","*/*"),f.headers.has("accept-language")||f.headers.set("accept-language",e.request.headers.get("accept-language"));const g=await jt(f,t,r,{...n,depth:n.depth+1}),$=g.headers.get("set-cookie");if($)for(const j of Lr($)){const{name:x,value:O,...L}=Hr(j);o(x,O,L)}return g}})}}function Le(e,t,r){return e instanceof Request?e:new Request(typeof e=="string"?new URL(e,r):e,t)}function X(e){function t(r,n){if(r)for(const s in r){if(s[0]==="_"||e.has(s))continue;const o=[...e.values()],i=Wr(s,n?.slice(n.lastIndexOf(".")))??`valid exports are ${o.join(", ")}, or anything with a '_' prefix`;throw new Error(`Invalid export '${s}'${n?` in ${n}`:""} (${i})`)}}return t}function Wr(e,t=".js"){const r=[];if(oe.has(e)&&r.push(`+layout${t}`),bt.has(e)&&r.push(`+page${t}`),xe.has(e)&&r.push(`+layout.server${t}`),vt.has(e)&&r.push(`+page.server${t}`),kt.has(e)&&r.push(`+server${t}`),r.length>0)return`'${e}' is a valid export in ${r.slice(0,-1).join(", ")}${r.length>1?" or ":""}${r.at(-1)}`}const oe=new Set(["load","prerender","csr","ssr","trailingSlash","config"]),bt=new Set([...oe,"entries"]),xe=new Set([...oe,"actions"]),vt=new Set([...xe,"entries"]),kt=new Set(["GET","POST","PATCH","PUT","DELETE","OPTIONS","prerender","trailingSlash","config","entries"]),Br=X(oe),Vr=X(bt),Gr=X(xe),Zr=X(vt),Xr=X(kt),Me=({html:e})=>e,We=()=>!1,Je=({type:e})=>e==="js"||e==="css";async function jt(e,t,r,n){const s=new URL(e.url);if(t.csrf_check_origin&&Fe(e)&&(e.method==="POST"||e.method==="PUT"||e.method==="PATCH"||e.method==="DELETE")&&e.headers.get("origin")!==s.origin){const m=$e(403,`Cross-site ${e.method} form submissions are forbidden`);return e.headers.get("accept")==="application/json"?be(m.body,{status:m.status}):A(m.body.message,{status:m.status})}let o;try{o=Dt(s.pathname)}catch{return A("Malformed URI",{status:400})}let i=null,c={};if(C&&!n.prerendering?.fallback){if(!o.startsWith(C))return A("Not found",{status:404});o=o.slice(C.length)||"/"}const d=Jt(o);let a;if(d&&(o=Pe(o)||"/",s.pathname=Pe(s.pathname)||"/",a=s.searchParams.get(Ne)?.split("").map(h=>h==="1"),s.searchParams.delete(Ne)),!n.prerendering?.fallback){const h=await r._.matchers();for(const m of r._.routes){const b=m.pattern.exec(o);if(!b)continue;const w=Ct(b,m.params,h);if(w){i=m,c=Ht(w);break}}}let l;const u={};let _={};const f={cookies:null,fetch:null,getClientAddress:n.getClientAddress||(()=>{throw new Error("@sveltejs/adapter-auto does not specify getClientAddress. Please raise an issue")}),locals:{},params:c,platform:n.platform,request:e,route:{id:i?.id??null},setHeaders:h=>{for(const m in h){const b=m.toLowerCase(),w=h[m];if(b==="set-cookie")throw new Error("Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies");if(b in u)throw new Error(`"${m}" header is already set`);u[b]=w,n.prerendering&&b==="cache-control"&&(n.prerendering.cache=w)}},url:s,isDataRequest:d};let y={transformPageChunk:Me,filterSerializedResponseHeaders:We,preload:Je};try{if(i){if(s.pathname===C||s.pathname===C+"/")l="always";else if(i.page){const g=await Promise.all([...i.page.layouts.map($=>$==null?$:r._.nodes[$]()),r._.nodes[i.page.leaf]()]);l=q(g,"trailingSlash")}else i.endpoint&&(l=(await i.endpoint()).trailingSlash);if(!d){const g=ke(s.pathname,l??"never");if(g!==s.pathname&&!n.prerendering?.fallback)return new Response(void 0,{status:308,headers:{"x-sveltekit-normalize":"1",location:(g.startsWith("//")?s.origin+g:g)+(s.search==="?"?"":s.search)}})}}const{cookies:h,new_cookies:m,get_cookie_header:b,set_internal:w}=Ur(e,s,l??"never");_=m,f.cookies=h,f.fetch=Mr({event:f,options:t,manifest:r,state:n,get_cookie_header:b,set_internal:w}),n.prerendering&&!n.prerendering.fallback&&Ze(s);const v=await t.hooks.handle({event:f,resolve:(g,$)=>p(g,$).then(j=>{for(const x in u){const O=u[x];j.headers.set(x,O)}return He(j.headers,Object.values(_)),n.prerendering&&g.route.id!==null&&j.headers.set("x-sveltekit-routeid",encodeURI(g.route.id)),j})});if(v.status===200&&v.headers.has("etag")){let g=e.headers.get("if-none-match");g?.startsWith('W/"')&&(g=g.substring(2));const $=v.headers.get("etag");if(g===$){const j=new Headers({etag:$});for(const x of["cache-control","content-location","date","expires","vary","set-cookie"]){const O=v.headers.get(x);O&&j.set(x,O)}return new Response(void 0,{status:304,headers:j})}}if(d&&v.status>=300&&v.status<=308){const g=v.headers.get("location");if(g)return ye(new U(v.status,g))}return v}catch(h){if(h instanceof U){const m=d?ye(h):i?.page&&et(f)?rt(h):ne(h.status,h.location);return He(m.headers,Object.values(_)),m}return await Te(f,t,h)}async function p(h,m){try{if(m){if("ssr"in m)throw new Error("ssr has been removed, set it in the appropriate +layout.js instead. See the PR for more information: https://github.com/sveltejs/kit/pull/6197");y={transformPageChunk:m.transformPageChunk||Me,filterSerializedResponseHeaders:m.filterSerializedResponseHeaders||We,preload:m.preload||Je}}if(n.prerendering?.fallback)return await Z({event:h,options:t,manifest:r,state:n,page_config:{ssr:!1,csr:!0},status:200,error:null,branch:[],fetched:[],resolve_opts:y});if(i){let b;if(d)b=await Sr(h,i,t,r,n,a,l??"never");else if(i.endpoint&&(!i.page||zt(h)))b=await Ut(h,await i.endpoint(),n);else if(i.page)b=await Rr(h,i.page,t,r,n,y);else throw new Error("This should never happen");return b}return n.error?A("Internal Server Error",{status:500}):n.depth===0?await mt({event:h,options:t,manifest:r,state:n,status:404,error:new Error(`Not found: ${h.url.pathname}`),resolve_opts:y}):n.prerendering?A("not found",{status:404}):await fetch(e)}catch(b){return await Te(h,t,b)}finally{h.cookies.set=()=>{throw new Error("Cannot use `cookies.set(...)` after the response has been generated")},h.setHeaders=()=>{throw new Error("Cannot use `setHeaders(...)` after the response has been generated")}}}}class Yr{#e;#t;constructor(t){this.#e=Ot,this.#t=t}async init({env:t}){const r=Object.entries(t),n=this.#e.env_public_prefix;Object.fromEntries(r.filter(([o])=>!o.startsWith(n)));const s=Object.fromEntries(r.filter(([o])=>o.startsWith(n)));if(Tt(s),!this.#e.hooks)try{const o=await Rt();this.#e.hooks={handle:o.handle||(({event:i,resolve:c})=>c(i)),handleError:o.handleError||(({error:i})=>console.error(i)),handleFetch:o.handleFetch||(({request:i,fetch:c})=>c(i))}}catch(o){throw o}}async respond(t,r){if(!(t instanceof Request))throw new Error("The first argument to server.respond must be a Request object. See https://github.com/sveltejs/kit/pull/3384 for details");return jt(t,this.#e,this.#t,{...r,error:!1,depth:0})}}export{Yr as Server};
